"use strict";(self["webpackChunkvetconst"]=self["webpackChunkvetconst"]||[]).push([[443],{883:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center containerCustom"},[a("div",{staticClass:"align-self-center border customCard"},[a("h5",[t._v(t._s(t.title))]),a("hr"),a("b-form-group",{attrs:{id:"input-group-1",label:"Veterinario","label-for":"input-1"}},[a("b-form-select",{staticStyle:{"text-align":"center"},attrs:{options:t.veterinarios},model:{value:t.form.veterinario,callback:function(e){t.$set(t.form,"veterinario",e)},expression:"form.veterinario"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Data do agendamento","label-for":"input-2"}},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker",placeholder:"Seleciona uma data",required:""},model:{value:t.form.dataDoAgendamento,callback:function(e){t.$set(t.form,"dataDoAgendamento",e)},expression:"form.dataDoAgendamento"}})],1),a("div",{staticClass:"mt-3"},[a("b-button",{staticClass:"w-100",attrs:{variant:"primary",block:""},on:{click:t.agendarConsulta}},[t._v(t._s(t.buttonMsg)+" ")])],1)],1)])},s=[],o=a(6166),n=a.n(o),r=a(4665),u={name:"Cadastrar",computed:{...(0,r.Se)(["getUser"])},data(){return{form:{dataDoAgendamento:"",veterinario:""},veterinarios:[],title:"",buttonMsg:""}},async mounted(){this.$route.params.id>0?(await this.getConsulta(),this.title="Atualizar agendamento",this.buttonMsg="Atualizar"):(this.title="Realizar agendamento",this.buttonMsg="Cadastrar"),await this.getVet()},methods:{async getVet(){const t=await n().get("https://meu-petzinho-api.herokuapp.com/api/veterinarios",{headers:{Authorization:`Bearer ${this.getUser.token}`}});if(200==t.status){this.veterinarios=[];for(let e in t.data)this.veterinarios.push({value:t.data[e].id,text:t.data[e].nome})}},async agendarConsulta(){if(this.$route.params.id>0){const t=await n().put("https://meu-petzinho-api.herokuapp.com/api/agendamentos/"+this.$route.params.id,{dataDoAgendamento:this.form.dataDoAgendamento},{headers:{Authorization:`Bearer ${this.getUser.token}`}});200==t.status?this.$bvToast.toast("Seu agendamento foi atualizado com sucesso!",{title:"Sucesso!",variant:"success",autoHideDelay:3e3,appendToast:!1}):this.$bvToast.toast("Verifique a validade do token",{title:"Ops",variant:"danger",autoHideDelay:3e3,appendToast:!1})}else{const t=await n().post("https://meu-petzinho-api.herokuapp.com/api/agendamentos",this.form,{headers:{Authorization:`Bearer ${this.getUser.token}`}});201==t.status?this.$bvToast.toast("Seu agendamento foi efetuado com sucesso!",{title:"Sucesso!",variant:"success",autoHideDelay:3e3,appendToast:!1}):this.$bvToast.toast("Verifique a validade do token",{title:"Ops",variant:"danger",autoHideDelay:3e3,appendToast:!1})}},async getConsulta(){const t=await n().get("https://meu-petzinho-api.herokuapp.com/api/agendamentos/"+this.$route.params.id,{headers:{Authorization:`Bearer ${this.getUser.token}`}});200==t.status&&(this.form.veterinario=t.data.veterinario.id,this.form.dataDoAgendamento=t.data.dataDoAgendamento)}},props:["test","id"]},d=u,l=a(1001),c=(0,l.Z)(d,i,s,!1,null,null,null),m=c.exports},3406:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-5"},[a("div",{staticClass:"my-3",staticStyle:{"text-align":"right"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.cadastrar(null)}}},[t._v("Nova consulta")])],1),a("b-table",{attrs:{responsive:"",striped:"",hover:"",items:t.items,fields:t.fields,"per-page":t.perPage,"current-page":t.currentPage},scopedSlots:t._u([{key:"cell(edit)",fn:function(e){return[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(a){return t.cadastrar(e.item)}}},[t._v("Editar")]),a("b-button",{staticClass:"ml-1",attrs:{variant:"danger",size:"sm"},on:{click:function(a){return t.deleteAgenda(e.item)}}},[t._v("Excluir ")])]}}])}),a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table",align:"right"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},s=[],o=a(6166),n=a.n(o),r=a(4665),u={data(){return{fields:[{key:"id",label:"Código",sortable:!0},{key:"veterinario",label:"Veterinário",sortable:!0},{key:"nome",label:"Tutor",sortable:!0},{key:"paciente",label:"Paciente",sortable:!0},{key:"dataDoAgendamento",label:"Data do Agendamento",sortable:!0},{key:"edit",label:"Editar / Excluir"}],items:[],perPage:10,currentPage:1}},async mounted(){await this.getConsultas()},computed:{rows(){return this.items.length},...(0,r.Se)(["getUser"])},methods:{async getConsultas(){const t=await n().get("https://meu-petzinho-api.herokuapp.com/api/agendamentos/meus-agendamentos",{headers:{Authorization:`Bearer ${this.getUser.token}`}});if(200==t.status){this.items=[];for(let e in t.data)this.items.push({id:t.data[e].id,dataDoAgendamento:t.data[e].dataDoAgendamento,veterinario:t.data[e].veterinario.nome,paciente:t.data[e].usuarioCliente.nomePet,nome:t.data[e].usuarioCliente.nome})}else this.$bvToast.toast("Verifique a validade do token",{title:"Ops",variant:"danger",autoHideDelay:3e3,appendToast:!1})},cadastrar(t){const e=null!==t?t.id:0;this.$router.push({name:"Cadastrar",params:{id:e,test:t}})},async deleteAgenda(t){const e=await n()["delete"]("https://meu-petzinho-api.herokuapp.com/api/agendamentos/"+t.id,{headers:{Authorization:`Bearer ${this.getUser.token}`}});204==e.status?(this.items=this.items.filter((e=>e.id!==t.id)),this.$bvToast.toast("Seu agendamento foi excluido com sucesso!",{title:"Sucesso!",variant:"success",autoHideDelay:3e3,appendToast:!1})):this.$bvToast.toast("Verifique a validade do token",{title:"Ops",variant:"danger",autoHideDelay:3e3,appendToast:!1})}}},d=u,l=a(1001),c=(0,l.Z)(d,i,s,!1,null,null,null),m=c.exports},3850:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h1",[t._v("Página inicial")])])}],o={name:"Home"},n=o,r=a(1001),u=(0,r.Z)(n,i,s,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=about.f38eb646.js.map